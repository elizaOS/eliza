# ============================================================================
# Polyagent Game - Environment Variables Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit the .env file to version control!

# ============================================================================
# Application Configuration
# ============================================================================
# Application URL (used for referral links and redirects)
NEXT_PUBLIC_APP_URL=https://polyagent.market
# Blog URL (used for the blog link on the landing page)
NEXT_PUBLIC_BLOG_URL=https://blog.polyagent.market
# Toggle global waitlist/coming-soon mode (true restricts app to landing)
WAITLIST_MODE=false

# ============================================================================
# Admin Configuration
# ============================================================================
# Email domain for automatic admin access (users with this email domain get admin)
# Example: elizalabs.ai will grant admin to all users@elizalabs.ai emails
# ADMIN_EMAIL_DOMAIN=your-company.com  # Optional: Auto-promote users with this email domain to admin
# Waitlist leaderboard cache window in ms (15s default if unset)
WAITLIST_LEADERBOARD_CACHE_MS=15000
# Waitlist position cache window in ms (5s default if unset)
WAITLIST_POSITION_CACHE_MS=5000

# Node Environment (production, development, test)
NODE_ENV=development

# ============================================================================
# Database Configuration
# ============================================================================
# Format: postgresql://username:password@host:port/database
DATABASE_URL=

# PostgreSQL URL (Alternative - used by Eliza agents)
# If not set, will use DATABASE_URL
POSTGRES_URL=

# PGlite Data Directory (Development - Embedded Database)
# Only used if POSTGRES_URL is not set
# PGLITE_DATA_DIR=./data/pglite

# ============================================================================
# Privy Authentication Configuration
# ============================================================================
# Get these from https://dashboard.privy.io
NEXT_PUBLIC_PRIVY_APP_ID=your_privy_app_id_here
PRIVY_APP_SECRET=your_privy_app_secret_here

# ============================================================================
# Blockchain Configuration (Web3 Integration)
# ============================================================================
# Chain ID: 8453 (Base Mainnet) or 84532 (Base Sepolia Testnet)
NEXT_PUBLIC_CHAIN_ID=84532

# RPC URL for the selected chain
NEXT_PUBLIC_RPC_URL=https://sepolia.base.org

# Alternative RPC URL (used by A2A integration)
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org

# WalletConnect Project ID (get from https://cloud.walletconnect.com)
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your_walletconnect_project_id

# ============================================================================
# Smart Contract Addresses (Base Sepolia Testnet)
# ============================================================================
# These are filled after deploying contracts
NEXT_PUBLIC_IDENTITY_REGISTRY_BASE_SEPOLIA=0x0000000000000000000000000000000000000000
NEXT_PUBLIC_REPUTATION_SYSTEM_BASE_SEPOLIA=0x0000000000000000000000000000000000000000
NEXT_PUBLIC_DIAMOND_BASE_SEPOLIA=0x0000000000000000000000000000000000000000

# Smart Contract Addresses (Base Mainnet)
# NEXT_PUBLIC_IDENTITY_REGISTRY_BASE=0x0000000000000000000000000000000000000000
# NEXT_PUBLIC_REPUTATION_SYSTEM_BASE=0x0000000000000000000000000000000000000000
# NEXT_PUBLIC_DIAMOND_BASE=0x0000000000000000000000000000000000000000

# ============================================================================
# Deployment Configuration (Server-Side Only)
# ============================================================================
# Deployer wallet private key (NEVER commit the real .env file!)
# Used for on-chain registrations and contract deployments
DEPLOYER_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Optional: Fee recipient address (defaults to deployer if not set)
# FEE_RECIPIENT=0x0000000000000000000000000000000000000000

# Block Explorer API Keys (for contract verification)
# Generic Etherscan API key (used by scripts and Foundry)
ETHERSCAN_API_KEY=your_api_key_here

# Base Sepolia specific (if different from generic)
BASE_SEPOLIA_ETHERSCAN_API_KEY=your_api_key_here

# Base Mainnet specific (if different from generic)
BASE_ETHERSCAN_API_KEY=your_api_key_here

# ============================================================================
# Storage Configuration (Image Uploads)
# ============================================================================
# Production: Use Vercel Blob (automatic in Vercel deployments)
# Set USE_VERCEL_BLOB=true to force Vercel Blob even in development
USE_VERCEL_BLOB=false

# Vercel Blob Token (automatically available in Vercel environment)
# Only needed if manually configuring Vercel Blob outside of Vercel
# BLOB_READ_WRITE_TOKEN=your_vercel_blob_token

# Development: MinIO Configuration (S3-compatible local storage)
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=polyagent
MINIO_SECRET_KEY=polyagent_dev_password
MINIO_BUCKET=polyagent-uploads

# ============================================================================
# Polyagent Agent Authentication
# ============================================================================
# These credentials enable agents to authenticate internally without requiring
# users to provide Privy authentication tokens manually.
# Generate a secure random string for POLYAGENT_AGENT_SECRET (e.g., using openssl rand -hex 32)

# Agent ID (must match the agent configuration)
POLYAGENT_AGENT_ID=polyagent-agent-alice

# ============================================================================
# AI Model Provider Configuration (for Eliza Agents)
# ============================================================================
# At least one API key is required for agent functionality
# Groq is prioritized over OpenAGI for faster inference
OPENAI_API_KEY=your_openai_api_key_here
GROQ_API_KEY=your_groq_api_key_here
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ============================================================================
# Image Generation Configuration
# ============================================================================
# Fal.ai API key for generating actor and organization images
# Get from https://fal.ai/dashboard
FAL_KEY=your_fal_ai_api_key_here

# ============================================================================
# Game Control Configuration
# ============================================================================
# Manual game start/stop control for production environments
# Controls both game-tick and agent-tick cron jobs
# Values: "start" | "running" | "true" to enable, anything else to pause
# Set to "pause" or "false" or leave empty to pause the game
GAME_START=pause

# ============================================================================
# Agent Behavior Configuration (Optional)
# ============================================================================
# Enable blockchain integration for agent discovery (A2A)
# A2A_ENABLE_BLOCKCHAIN=false

# Auto-start agents on daemon startup (default: true)
# AUTO_START_AGENTS=true

# Enable automatic trading for agents (default: false)
AGENT_AUTO_TRADE=false

# ============================================================================
# Logging Configuration (Optional)
# ============================================================================
# Log level: debug, info, warn, error (default: debug in dev, info in production)
LOG_LEVEL=debug

# A2A specific log level
# A2A_LOG_LEVEL=info

# ============================================================================
# Market Configuration (Optional - can be set after deployment)
# ============================================================================
# DEFAULT_LIQUIDITY=1000000000000000000000  # 1000 ETH in wei
# DEFAULT_FEE_RATE=100  # 100 basis points = 1%

# ============================================
# SENTRY ERROR TRACKING (Optional)
# ============================================
# Sentry DSN for error tracking and performance monitoring
# Get your DSN from https://sentry.io/settings/projects/
NEXT_PUBLIC_SENTRY_DSN="https://your-dsn@sentry.io/project-id"
SENTRY_DSN="https://your-dsn@sentry.io/project-id"

# Source Map Upload (Optional - for better stack traces in production)
# Get auth token from https://sentry.io/settings/account/api/auth-tokens/
SENTRY_ORG="your-org"
SENTRY_PROJECT="your-project"
SENTRY_AUTH_TOKEN="your-auth-token"

# Release Tracking (Optional - set via CI/CD or manually)
# Format: version or git commit hash
NEXT_PUBLIC_SENTRY_RELEASE=""
SENTRY_RELEASE=""
# ============================================================================
# Perpetuals Settlement Mode Configuration
# ============================================================================
# Bridges off-chain trading engine with on-chain Diamond contracts
#
# Settlement mode determines how perpetual futures trades are settled:
# - offchain: Fast MVP trading with database persistence (default, no gas fees)
# - onchain: All trades settle to blockchain (decentralized, trustless)
# - hybrid: Off-chain execution with periodic on-chain settlement
#           Best of both worlds - fast trading + blockchain security
NEXT_PUBLIC_PERP_SETTLEMENT_MODE=offchain

# On-chain features (only used in onchain/hybrid modes)
# Enable DeFi mode with blockchain settlement
NEXT_PUBLIC_ENABLE_ONCHAIN_PERPS=false

# Enable on-chain referral system
NEXT_PUBLIC_ENABLE_REFERRALS=false

# Enable on-chain liquidity pools (AMM)
NEXT_PUBLIC_ENABLE_LIQUIDITY_POOLS=false

# Diamond contract address (required for onchain/hybrid modes)
# Use NEXT_PUBLIC_DIAMOND_BASE_SEPOLIA from above or set a specific address
NEXT_PUBLIC_DIAMOND_ADDRESS=

# Hybrid mode settings (only used when NEXT_PUBLIC_PERP_SETTLEMENT_MODE=hybrid)
# Batch settlement interval in milliseconds (default: 3600000 = 1 hour)
NEXT_PUBLIC_HYBRID_BATCH_INTERVAL=3600000

# Maximum positions to settle per batch (default: 100)
NEXT_PUBLIC_HYBRID_BATCH_SIZE=100

# Async settlement (true = don't wait for blockchain confirmation, faster UX)
NEXT_PUBLIC_ASYNC_SETTLEMENT=true

# Number of retry attempts for failed settlements (default: 3)
NEXT_PUBLIC_SETTLEMENT_RETRIES=3

# Oracle Configuration Example
# Copy relevant values to your .env file

# Oracle Contracts (auto-set by deployment)
NEXT_PUBLIC_POLYAGENT_ORACLE=0x5FbDB2315678afecb367f032d93F642f64180aa3
NEXT_PUBLIC_PREDIMARKET=0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
NEXT_PUBLIC_MARKET_FACTORY=0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
NEXT_PUBLIC_CONTEST_ORACLE=0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
NEXT_PUBLIC_TEST_TOKEN=0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9

# Oracle Publishing (server-side only, keep secret!)
# Localnet (Anvil account #1)
ORACLE_PRIVATE_KEY=0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d

# Testnet/Mainnet (create dedicated wallet)
# ORACLE_PRIVATE_KEY=0x... # Your dedicated oracle wallet

# Encryption Key (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
ORACLE_ENCRYPTION_KEY=your-32-byte-hex-key-change-in-production-please

# Optional: Gas Configuration
ORACLE_GAS_MULTIPLIER=1.2
ORACLE_MAX_GAS_PRICE=100
ORACLE_CONFIRMATIONS=1

# ============================================================================
# Agent0 SDK Configuration (Agent Registration & Discovery Network)
# ============================================================================
# Agent0 is a decentralized network for agent registration, discovery, and reputation
# Built on ERC-8004 standard with on-chain identity and IPFS metadata storage
# Supports multi-chain: Ethereum Sepolia, Base Sepolia, Polygon Amoy

# Enable Agent0 integration (set to true to enable agent registration and search)
AGENT0_ENABLED=false

# Network selection: 'sepolia' (Ethereum testnet), 'mainnet' (Ethereum), 'localnet' (Anvil)
AGENT0_NETWORK=sepolia

# Ethereum RPC URL (Agent0 operates on Ethereum L1, not Base)
# Get free RPC from: https://www.alchemy.com/ or https://infura.io/
# Sepolia testnet: https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
# Mainnet: https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
# Localnet: http://localhost:8545 (for local testing with Anvil)
AGENT0_RPC_URL=

# Private key for Agent0 operations (write operations like registration, feedback)
# Use a dedicated test wallet for testnet - NEVER use mainnet wallet with funds!
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Format: 0x followed by 64 hex characters
AGENT0_PRIVATE_KEY=

# IPFS Provider Configuration (for metadata storage)
# Options: 'pinata', 'filecoinPin', 'node'
# Recommended: Use 'pinata' for testnet/production
AGENT0_IPFS_PROVIDER=pinata

# Pinata JWT (required when AGENT0_IPFS_PROVIDER=pinata)
# Get from: https://app.pinata.cloud/ → API Keys → Create New Key
# Requires pinFileToIPFS permission
PINATA_JWT=

# Filecoin private key (required when AGENT0_IPFS_PROVIDER=filecoinPin)
# Alternative to Pinata for decentralized storage
FILECOIN_PRIVATE_KEY=

# IPFS Node URL (required when AGENT0_IPFS_PROVIDER=node)
# Public gateway: https://ipfs.io (read-only)
# Infura IPFS: https://ipfs.infura.io:5001 (requires auth)
AGENT0_IPFS_API=

# Agent0 Subgraph URL (for querying agent data)
# Sepolia: https://gateway.thegraph.com/api/[API_KEY]/subgraphs/id/[SUBGRAPH_ID]
# Get API key from: https://thegraph.com/studio/
AGENT0_SUBGRAPH_URL=

# Polyagent Game Agent Identity (for registering game as agent in Agent0 network)
POLYAGENT_GAME_NAME="Polyagent Prediction Market"
POLYAGENT_GAME_DESCRIPTION="AI-powered prediction market game on Base"
POLYAGENT_GAME_WALLET=
POLYAGENT_GAME_PRIVATE_KEY=
POLYAGENT_MCP_URL=
POLYAGENT_A2A_URL=

# A2A Protocol API Key (Required for production/staging)
# Used to authenticate Agent-to-Agent communication requests
# Generate with: openssl rand -hex 32
# Note: Localhost bypasses this check for development
POLYAGENT_A2A_API_KEY=
POLYAGENT_LOGO_URL=

# ============================================================================
# Social Media Integration (for share verification)
# ============================================================================

# Twitter/X OAuth 2.0 (for user login and account linking)
# Get these from https://developer.twitter.com/en/portal/dashboard
# Go to your app → "User authentication settings" → OAuth 2.0 credentials
TWITTER_CLIENT_ID=
TWITTER_CLIENT_SECRET=

# Twitter API v2 Bearer Token (for tweet verification)
# Get from https://developer.twitter.com/en/portal/dashboard
# Go to your app → "Keys and tokens" → "Bearer Token"
TWITTER_BEARER_TOKEN=

# Farcaster (for cast verification via Neynar API)
# Get your API key from https://neynar.com/
NEYNAR_API_KEY=

# Farcaster FID for your Polyagent account (for follow verification)
# Find your FID at https://warpcast.com/~/settings
FARCASTER_FID=1521916

# Discord OAuth 2.0 (for user login and Discord server verification)
# Get these from https://discord.com/developers/applications
# Go to your app → OAuth2 → General
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# Discord Guild ID (for Discord join verification)
# Right-click your server → Copy Server ID (requires Developer Mode enabled)
# Enable Developer Mode: User Settings → Advanced → Developer Mode
DISCORD_GUILD_ID=1438561373012627456

# Discord Invite URL (public invite link for users to join)
# Create in Discord: Server Settings → Invites → Create Invite
# Example: https://discord.gg/YourInviteCode
NEXT_PUBLIC_DISCORD_INVITE_URL=https://discord.gg/4DYsFgyp

# ============================================
# ADD THESE TO YOUR .env FILE
# ============================================
# Generated by Claude Code analysis on 2025-11-16
# For RL Pipeline and Agent Autonomous System

# ============================================
# Weights & Biases Configuration (REQUIRED FOR RL)
# ============================================
# Get your API key from: https://wandb.ai/authorize
WANDB_API_KEY=your_wandb_api_key_here
WANDB_PROJECT=polyagent-training
WANDB_ENTITY=your_wandb_username_or_org
WANDB_MODEL=meta-llama/Llama-3.3-70B-Instruct

# ============================================
# Training Configuration
# Note: Trajectory recording is always enabled automatically
# ============================================
# Minimum trajectories before GRPO training kicks in
TRAINING_MIN_TRAJECTORIES=1000

# Minimum group size for GRPO ranking comparisons
TRAINING_MIN_GROUP_SIZE=5

# ============================================
# Model Configuration
# ============================================
# Base model to use (must be in W&B ART catalog)
BASE_MODEL=OpenPipe/Qwen3-14B-Instruct

# Enable/disable RL model usage
USE_RL_MODEL=true

# Fallback to base model if RL model fails
RL_FALLBACK_TO_BASE=true

# Optional: Pin to specific RL model version
# RL_MODEL_VERSION=latest

# ============================================
# Training Execution Mode
# ============================================
# false = Use W&B remote backend (RECOMMENDED)
# true = Train locally (requires GPU)
TRAIN_RL_LOCAL=false

# Force local training for large models (not recommended unless you have powerful GPU)
FORCE_LOCAL_TRAINING=false

# ============================================
# Tinker Cloud Training (Alternative to Atropos)
# ============================================
# Training mode: 'atropos' for local vLLM or 'tinker' for cloud-based
# atropos = Uses local vLLM server for GRPO training (requires GPU)
# tinker = Uses Tinker cloud API for GRPO training (no GPU required)
TRAINING_MODE=atropos

# Tinker API Key for cloud training via Thinking Machines
# Get from: https://tinker.thinkingmachines.dev/
# Required when TRAINING_MODE=tinker
TINKER_API_KEY=

# ============================================
# Agent Configuration
# ============================================
# Auto-provision Privy embedded wallets for agents
AUTO_CREATE_AGENT_WALLETS=true

# Agent LLM Provider: huggingface | phala | ollama | groq (default: groq)
# AGENT_LLM_PROVIDER=groq

# Phala TEE Inference Endpoint (required when AGENT_LLM_PROVIDER=phala)
# Example: https://phala-tee.example.com/v1/chat
PHALA_ENDPOINT=

# Cron job security token (generate with: openssl rand -hex 32)
CRON_SECRET=your_random_secret_here_replace_with_actual_secret
# NFT revalidation cron job timeout in milliseconds (default: 50000 = 50s, allows 10s buffer for Vercel 60s limit)
NFT_REVALIDATE_TIMEOUT_MS=50000

# NPC Tick Configuration
# Number of NPCs to process per tick (rotates through all)
NPC_TICK_BATCH_SIZE=20

# NPC Trading Configuration
# NPC_TRADE_PROBABILITY - Probability (0-1) of NPC trading per tick (optional, default: 0.6)
# NPC_MAX_TRADES_PER_DAY - Maximum trades per NPC per day (optional, default: 20)
# NPC_MIN_MINUTES_BETWEEN_TRADES - Minimum cooldown minutes between trades (optional, default: 5)

# Maximum consecutive errors before stopping NPC tick
NPC_TICK_MAX_ERRORS=5

# Agent lock duration in milliseconds (prevents concurrent execution)
AGENT_LOCK_DURATION_MS=900000

# Leaderboard cache TTL in milliseconds
LEADERBOARD_CACHE_MS=120000

# Game tick budget in milliseconds (3 minutes)
GAME_TICK_BUDGET_MS=180000

# ============================================
# Optional: Debug and Monitoring
# ============================================
# Enable debug logging
DEBUG=false

# ============================================
# Linear Integration (Optional)
# ============================================
# Automatically create Linear issues from game feedback submissions.
# If unset, feedback submissions still work but Linear issues are not created.
#
# Get API key from Linear > Settings > Account > Security & Access > API
LINEAR_API_KEY=
# Your team ID in Linear (find at Linear > Settings > Team > General > ID)
LINEAR_TEAM_ID=
# Game Feedback label ID in Linear (optional - find via Linear API or create a new label)
LINEAR_GAME_FEEDBACK_LABEL_ID=

# ============================================
# NFT Minting Configuration
# ============================================
# Contract address for the Top 100 NFT collection (required for minting to work)
# Must be a valid Ethereum address. Minting is disabled if not set.
NFT_CONTRACT_ADDRESS=
# Chain ID where the NFT contract is deployed (defaults to 1 = Ethereum mainnet)
NFT_CHAIN_ID=1


# ============================================================================
# Currency Configuration
# ============================================================================
# Symbol used for displaying Polyagent points in the UI
# Default: ƀ (Latin Small Letter B with Stroke)
# Examples: ƀ, Ƀ, $, ₿, ◆
NEXT_PUBLIC_CURRENCY_SYMBOL=ƀ
