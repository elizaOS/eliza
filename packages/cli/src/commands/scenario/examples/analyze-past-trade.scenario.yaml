# scenarios/definitions/analyze-past-trade.scenario.yaml

name: 'Verify Agent Can Analyze and Explain Past Trades'
description: "Tests the agent's ability to act as a trading journal, looking up its own history and source code to explain its reasoning for a past action."

plugins:
  - name: '@elizaos/plugin-bootstrap'
    enabled: true
  - name: '@elizaos/plugin-evm'
    enabled: true

environment:
  type: local

run:
  - name: 'Ask agent to explain its last trade'
    input: "Can you explain the reasoning for your last 'make_trade' action?"
    evaluations:
      # Check that the agent correctly used the necessary tools.
      - type: 'trajectory_contains_action'
        action: 'evm-service.searchHistory'
      # The LLM Judge verifies the agent correctly synthesized the information.
      - type: 'llm_judge'
        prompt: 'Did the agent correctly explain its motivation for the last trade by referencing the information found in its event log?'
        expected: 'yes'

judgment:
  strategy: 'all_pass'
