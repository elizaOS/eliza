import type { BuildConfig } from 'bun';

export const buildConfig: BuildConfig = {
  entrypoints: ['./src/index.ts', './src/test-utils/index.ts'],
  outdir: './dist',
  target: 'node',
  format: 'esm',
  splitting: false,
  sourcemap: 'external',
  external: [
    'fs',
    'path',
    'child_process',
    'os',
    'net',
    'tls',
    'dns',
    'readline',
    'zlib',
    'vm',
    'cluster',
    'process',
    'buffer',
    'js-sha1',
    'node:buffer',
    'node:fs',
    'node:path',
    'node:web',
    'node:child_process',
    'node:os',
    'node:module',
    'sharp',
    'dotenv',
    '@solana/web3.js',
    'zod',
    '@hapi/shot',
    '@elizaos/core',
    'bun:test',
    'handlebars',
    // Add any modules that are causing dynamic require errors
    'sonic-boom',
    'atomic-sleep',
    'thread-stream',
    'real-require',
    'pino',
    'pino-pretty',
  ],
  naming: '[dir]/[name].[ext]',
};